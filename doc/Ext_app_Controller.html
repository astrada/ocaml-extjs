<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="css/style.css" type="text/css">
<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type">
<link rel="Start" href="index.html">
<link rel="previous" href="Ext_app_Application.html">
<link rel="next" href="Ext_Base.html">
<link rel="Up" href="index.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of class methods" rel=Appendix href="index_methods.html">
<link title="Index of class types" rel=Appendix href="index_class_types.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Ext" rel="Chapter" href="Ext.html">
<link title="Ext_AbstractComponent" rel="Chapter" href="Ext_AbstractComponent.html">
<link title="Ext_AbstractPlugin" rel="Chapter" href="Ext_AbstractPlugin.html">
<link title="Ext_app_Application" rel="Chapter" href="Ext_app_Application.html">
<link title="Ext_app_Controller" rel="Chapter" href="Ext_app_Controller.html">
<link title="Ext_Base" rel="Chapter" href="Ext_Base.html">
<link title="Ext_button_Button" rel="Chapter" href="Ext_button_Button.html">
<link title="Ext_Class" rel="Chapter" href="Ext_Class.html">
<link title="Ext_Component" rel="Chapter" href="Ext_Component.html">
<link title="Ext_ComponentLoader" rel="Chapter" href="Ext_ComponentLoader.html">
<link title="Ext_container_AbstractContainer" rel="Chapter" href="Ext_container_AbstractContainer.html">
<link title="Ext_container_Container" rel="Chapter" href="Ext_container_Container.html">
<link title="Ext_container_DockingContainer" rel="Chapter" href="Ext_container_DockingContainer.html">
<link title="Ext_container_Viewport" rel="Chapter" href="Ext_container_Viewport.html">
<link title="Ext_data_AbstractStore" rel="Chapter" href="Ext_data_AbstractStore.html">
<link title="Ext_data_Batch" rel="Chapter" href="Ext_data_Batch.html">
<link title="Ext_data_Errors" rel="Chapter" href="Ext_data_Errors.html">
<link title="Ext_data_Field" rel="Chapter" href="Ext_data_Field.html">
<link title="Ext_data_Model" rel="Chapter" href="Ext_data_Model.html">
<link title="Ext_data_Operation" rel="Chapter" href="Ext_data_Operation.html">
<link title="Ext_data_proxy_Ajax" rel="Chapter" href="Ext_data_proxy_Ajax.html">
<link title="Ext_data_proxy_Proxy" rel="Chapter" href="Ext_data_proxy_Proxy.html">
<link title="Ext_data_proxy_Server" rel="Chapter" href="Ext_data_proxy_Server.html">
<link title="Ext_data_reader_Reader" rel="Chapter" href="Ext_data_reader_Reader.html">
<link title="Ext_data_Request" rel="Chapter" href="Ext_data_Request.html">
<link title="Ext_data_ResultSet" rel="Chapter" href="Ext_data_ResultSet.html">
<link title="Ext_data_Store" rel="Chapter" href="Ext_data_Store.html">
<link title="Ext_data_writer_Writer" rel="Chapter" href="Ext_data_writer_Writer.html">
<link title="Ext_dd_DD" rel="Chapter" href="Ext_dd_DD.html">
<link title="Ext_dd_DDProxy" rel="Chapter" href="Ext_dd_DDProxy.html">
<link title="Ext_dd_DDTarget" rel="Chapter" href="Ext_dd_DDTarget.html">
<link title="Ext_dd_DragDrop" rel="Chapter" href="Ext_dd_DragDrop.html">
<link title="Ext_dd_DragSource" rel="Chapter" href="Ext_dd_DragSource.html">
<link title="Ext_dd_DragTracker" rel="Chapter" href="Ext_dd_DragTracker.html">
<link title="Ext_dd_StatusProxy" rel="Chapter" href="Ext_dd_StatusProxy.html">
<link title="Ext_dom_AbstractElement" rel="Chapter" href="Ext_dom_AbstractElement.html">
<link title="Ext_dom_AbstractElement_Fly" rel="Chapter" href="Ext_dom_AbstractElement_Fly.html">
<link title="Ext_dom_Element" rel="Chapter" href="Ext_dom_Element.html">
<link title="Ext_ElementLoader" rel="Chapter" href="Ext_ElementLoader.html">
<link title="Ext_Error" rel="Chapter" href="Ext_Error.html">
<link title="Ext_EventObject" rel="Chapter" href="Ext_EventObject.html">
<link title="Ext_form_action_Action" rel="Chapter" href="Ext_form_action_Action.html">
<link title="Ext_form_Basic" rel="Chapter" href="Ext_form_Basic.html">
<link title="Ext_form_FieldAncestor" rel="Chapter" href="Ext_form_FieldAncestor.html">
<link title="Ext_form_field_Base" rel="Chapter" href="Ext_form_field_Base.html">
<link title="Ext_form_field_Field" rel="Chapter" href="Ext_form_field_Field.html">
<link title="Ext_form_field_Text" rel="Chapter" href="Ext_form_field_Text.html">
<link title="Ext_form_Labelable" rel="Chapter" href="Ext_form_Labelable.html">
<link title="Ext_form_Panel" rel="Chapter" href="Ext_form_Panel.html">
<link title="Ext_grid_column_Column" rel="Chapter" href="Ext_grid_column_Column.html">
<link title="Ext_grid_feature_Feature" rel="Chapter" href="Ext_grid_feature_Feature.html">
<link title="Ext_grid_header_Container" rel="Chapter" href="Ext_grid_header_Container.html">
<link title="Ext_grid_Panel" rel="Chapter" href="Ext_grid_Panel.html">
<link title="Ext_grid_plugin_Editing" rel="Chapter" href="Ext_grid_plugin_Editing.html">
<link title="Ext_grid_View" rel="Chapter" href="Ext_grid_View.html">
<link title="Ext_layout_container_Container" rel="Chapter" href="Ext_layout_container_Container.html">
<link title="Ext_layout_ContextItem" rel="Chapter" href="Ext_layout_ContextItem.html">
<link title="Ext_layout_Layout" rel="Chapter" href="Ext_layout_Layout.html">
<link title="Ext_Loader" rel="Chapter" href="Ext_Loader.html">
<link title="Ext_menu_Menu" rel="Chapter" href="Ext_menu_Menu.html">
<link title="Ext_panel_AbstractPanel" rel="Chapter" href="Ext_panel_AbstractPanel.html">
<link title="Ext_panel_Panel" rel="Chapter" href="Ext_panel_Panel.html">
<link title="Ext_panel_Table" rel="Chapter" href="Ext_panel_Table.html">
<link title="Ext_selection_DataViewModel" rel="Chapter" href="Ext_selection_DataViewModel.html">
<link title="Ext_selection_Model" rel="Chapter" href="Ext_selection_Model.html">
<link title="Ext_selection_RowModel" rel="Chapter" href="Ext_selection_RowModel.html">
<link title="Ext_state_Manager" rel="Chapter" href="Ext_state_Manager.html">
<link title="Ext_state_Provider" rel="Chapter" href="Ext_state_Provider.html">
<link title="Ext_state_Stateful" rel="Chapter" href="Ext_state_Stateful.html">
<link title="Ext_Template" rel="Chapter" href="Ext_Template.html">
<link title="Ext_tip_QuickTip" rel="Chapter" href="Ext_tip_QuickTip.html">
<link title="Ext_tip_QuickTipManager" rel="Chapter" href="Ext_tip_QuickTipManager.html">
<link title="Ext_tip_Tip" rel="Chapter" href="Ext_tip_Tip.html">
<link title="Ext_tip_ToolTip" rel="Chapter" href="Ext_tip_ToolTip.html">
<link title="Ext_util_AbstractMixedCollection" rel="Chapter" href="Ext_util_AbstractMixedCollection.html">
<link title="Ext_util_Animate" rel="Chapter" href="Ext_util_Animate.html">
<link title="Ext_util_Bindable" rel="Chapter" href="Ext_util_Bindable.html">
<link title="Ext_util_ComponentDragger" rel="Chapter" href="Ext_util_ComponentDragger.html">
<link title="Ext_util_ElementContainer" rel="Chapter" href="Ext_util_ElementContainer.html">
<link title="Ext_util_Filter" rel="Chapter" href="Ext_util_Filter.html">
<link title="Ext_util_Floating" rel="Chapter" href="Ext_util_Floating.html">
<link title="Ext_util_Format" rel="Chapter" href="Ext_util_Format.html">
<link title="Ext_util_Grouper" rel="Chapter" href="Ext_util_Grouper.html">
<link title="Ext_util_KeyMap" rel="Chapter" href="Ext_util_KeyMap.html">
<link title="Ext_util_MixedCollection" rel="Chapter" href="Ext_util_MixedCollection.html">
<link title="Ext_util_Observable" rel="Chapter" href="Ext_util_Observable.html">
<link title="Ext_util_Offset" rel="Chapter" href="Ext_util_Offset.html">
<link title="Ext_util_Point" rel="Chapter" href="Ext_util_Point.html">
<link title="Ext_util_Region" rel="Chapter" href="Ext_util_Region.html">
<link title="Ext_util_Renderable" rel="Chapter" href="Ext_util_Renderable.html">
<link title="Ext_util_Sortable" rel="Chapter" href="Ext_util_Sortable.html">
<link title="Ext_util_Sorter" rel="Chapter" href="Ext_util_Sorter.html">
<link title="Ext_Version" rel="Chapter" href="Ext_Version.html">
<link title="Ext_view_AbstractView" rel="Chapter" href="Ext_view_AbstractView.html">
<link title="Ext_view_Table" rel="Chapter" href="Ext_view_Table.html">
<link title="Ext_view_View" rel="Chapter" href="Ext_view_View.html">
<link title="Ext_window_MessageBox" rel="Chapter" href="Ext_window_MessageBox.html">
<link title="Ext_window_Window" rel="Chapter" href="Ext_window_Window.html">
<link title="Ext_ZIndexManager" rel="Chapter" href="Ext_ZIndexManager.html">
<link title="Ext_MessageBox" rel="Chapter" href="Ext_MessageBox.html">
<link title="ExtUtils" rel="Chapter" href="ExtUtils.html"><title>Ext_app_Controller</title>
</head>
<body>
<div class="navbar"><a href="Ext_app_Application.html">Previous</a>
&nbsp;<a href="index.html">Up</a>
&nbsp;<a href="Ext_Base.html">Next</a>
</div>
<center><h1>Module <a href="type_Ext_app_Controller.html">Ext_app_Controller</a></h1></center>
<br>
<pre><span class="keyword">module</span> Ext_app_Controller: <code class="code">sig</code> <a href="Ext_app_Controller.html">..</a> <code class="code">end</code></pre>Controllers are the glue that binds an application ...
<p>

  <p>Controllers are the glue that binds an application together. All they really do is listen for events (usually from
views) and take some action. Here's how we might create a Controller to manage Users:</p>

<pre><code><a href="#!/api/Ext-method-define" rel="Ext-method-define" class="docClass">Ext.define</a>('MyApp.controller.Users', {
    extend: '<a href="#!/api/Ext.app.Controller" rel="Ext.app.Controller" class="docClass">Ext.app.Controller</a>',

    init: function() {
        console.log('Initialized Users! This happens before the Application launch function is called');
    }
});
</code></pre>

<p>The init function is a special method that is called when your application boots. It is called before the
<a href="#!/api/Ext.app.Application" rel="Ext.app.Application" class="docClass">Application</a>'s launch function is executed so gives a hook point to run any code before
your Viewport is created.</p>

<p>The init function is a great place to set up how your controller interacts with the view, and is usually used in
conjunction with another Controller function - <a href="#!/api/Ext.app.Controller-method-control" rel="Ext.app.Controller-method-control" class="docClass">control</a>. The control function
makes it easy to listen to events on your view classes and take some action with a handler function. Let's update
our Users controller to tell us when the panel is rendered:</p>

<pre><code><a href="#!/api/Ext-method-define" rel="Ext-method-define" class="docClass">Ext.define</a>('MyApp.controller.Users', {
    extend: '<a href="#!/api/Ext.app.Controller" rel="Ext.app.Controller" class="docClass">Ext.app.Controller</a>',

    init: function() {
        this.control({
            'viewport &gt; panel': {
                render: this.onPanelRendered
            }
        });
    },

    onPanelRendered: function() {
        console.log('The panel was rendered');
    }
});
</code></pre>

<p>We've updated the init function to use this.control to set up listeners on views in our application. The control
function uses the new ComponentQuery engine to quickly and easily get references to components on the page. If you
are not familiar with ComponentQuery yet, be sure to check out the <a href="#!/api/Ext.ComponentQuery" rel="Ext.ComponentQuery" class="docClass">documentation</a>. In brief though,
it allows us to pass a CSS-like selector that will find every matching component on the page.</p>

<p>In our init function above we supplied 'viewport > panel', which translates to "find me every Panel that is a direct
child of a Viewport". We then supplied an object that maps event names (just 'render' in this case) to handler
functions. The overall effect is that whenever any component that matches our selector fires a 'render' event, our
onPanelRendered function is called.</p>

<h2>Using refs</h2>

<p>One of the most useful parts of Controllers is the new ref system. These use the new <a href="#!/api/Ext.ComponentQuery" rel="Ext.ComponentQuery" class="docClass">Ext.ComponentQuery</a> to
make it really easy to get references to Views on your page. Let's look at an example of this now:</p>

<pre><code><a href="#!/api/Ext-method-define" rel="Ext-method-define" class="docClass">Ext.define</a>('MyApp.controller.Users', {
    extend: '<a href="#!/api/Ext.app.Controller" rel="Ext.app.Controller" class="docClass">Ext.app.Controller</a>',

    refs: [
        {
            ref: 'list',
            selector: 'grid'
        }
    ],

    init: function() {
        this.control({
            'button': {
                click: this.refreshGrid
            }
        });
    },

    refreshGrid: function() {
        this.getList().store.load();
    }
});
</code></pre>

<p>This example assumes the existence of a <a href="#!/api/Ext.grid.Panel" rel="Ext.grid.Panel" class="docClass">Grid</a> on the page, which contains a single button to
refresh the Grid when clicked. In our refs array, we set up a reference to the grid. There are two parts to this -
the 'selector', which is a <a href="#!/api/Ext.ComponentQuery" rel="Ext.ComponentQuery" class="docClass">ComponentQuery</a> selector which finds any grid on the page and
assigns it to the reference 'list'.</p>

<p>By giving the reference a name, we get a number of things for free. The first is the getList function that we use in
the refreshGrid method above. This is generated automatically by the Controller based on the name of our ref, which
was capitalized and prepended with get to go from 'list' to 'getList'.</p>

<p>The way this works is that the first time getList is called by your code, the ComponentQuery selector is run and the
first component that matches the selector ('grid' in this case) will be returned. All future calls to getList will
use a cached reference to that grid. Usually it is advised to use a specific ComponentQuery selector that will only
match a single View in your application (in the case above our selector will match any grid on the page).</p>

<p>Bringing it all together, our init function is called when the application boots, at which time we call this.control
to listen to any click on a <a href="#!/api/Ext.button.Button" rel="Ext.button.Button" class="docClass">button</a> and call our refreshGrid function (again, this will
match any button on the page so we advise a more specific selector than just 'button', but have left it this way for
simplicity). When the button is clicked we use out getList function to refresh the grid.</p>

<p>You can create any number of refs and control any number of components this way, simply adding more functions to
your Controller as you go. For an example of real-world usage of Controllers see the Feed Viewer example in the
examples/app/feed-viewer folder in the SDK download.</p>

<h2>Generated getter methods</h2>

<p>Refs aren't the only thing that generate convenient getter methods. Controllers often have to deal with Models and
Stores so the framework offers a couple of easy ways to get access to those too. Let's look at another example:</p>

<pre><code><a href="#!/api/Ext-method-define" rel="Ext-method-define" class="docClass">Ext.define</a>('MyApp.controller.Users', {
    extend: '<a href="#!/api/Ext.app.Controller" rel="Ext.app.Controller" class="docClass">Ext.app.Controller</a>',

    models: ['User'],
    stores: ['AllUsers', 'AdminUsers'],

    init: function() {
        var User = this.getUserModel(),
            allUsers = this.getAllUsersStore();

        var ed = new User({name: 'Ed'});
        allUsers.add(ed);
    }
});
</code></pre>

<p>By specifying Models and Stores that the Controller cares about, it again dynamically loads them from the appropriate
locations (app/model/User.js, app/store/AllUsers.js and app/store/AdminUsers.js in this case) and creates getter
functions for them all. The example above will create a new User model instance and add it to the AllUsers Store.
Of course, you could do anything in this function but in this case we just did something simple to demonstrate the
functionality.</p>

<h2>Further Reading</h2>

<p>For more information about writing Ext JS 4 applications, please see the
<a href="#/guide/application_architecture">application architecture guide</a>. Also see the <a href="#!/api/Ext.app.Application" rel="Ext.app.Application" class="docClass">Ext.app.Application</a> documentation.</p> <br>
<hr width="100%">
<pre><span id="TYPEt"><span class="keyword">class type</span> <a href="Ext_app_Controller.t-c.html">t</a></span> = <code class="code">object</code> <a href="Ext_app_Controller.t-c.html">..</a> <code class="code">end</code></pre><pre><span id="TYPEconfigs"><span class="keyword">class type</span> <a href="Ext_app_Controller.configs-c.html">configs</a></span> = <code class="code">object</code> <a href="Ext_app_Controller.configs-c.html">..</a> <code class="code">end</code></pre><pre><span id="TYPEevents"><span class="keyword">class type</span> <a href="Ext_app_Controller.events-c.html">events</a></span> = <code class="code">object</code> <a href="Ext_app_Controller.events-c.html">..</a> <code class="code">end</code></pre><pre><span id="TYPEstatics"><span class="keyword">class type</span> <a href="Ext_app_Controller.statics-c.html">statics</a></span> = <code class="code">object</code> <a href="Ext_app_Controller.statics-c.html">..</a> <code class="code">end</code></pre><pre><span id="VALof_configs"><span class="keyword">val</span> of_configs</span> : <code class="type"><a href="Ext_app_Controller.configs-c.html">configs</a> Js.t -> <a href="Ext_app_Controller.t-c.html">t</a> Js.t</code></pre><div class="info">
<code class="code">of_configs c</code> casts a config object <code class="code">c</code> to an instance of class <code class="code">t</code><br>
</div>
<pre><span id="VALto_configs"><span class="keyword">val</span> to_configs</span> : <code class="type"><a href="Ext_app_Controller.t-c.html">t</a> Js.t -> <a href="Ext_app_Controller.configs-c.html">configs</a> Js.t</code></pre><div class="info">
<code class="code">to_configs o</code> casts instance <code class="code">o</code> of class <code class="code">t</code> to a config object<br>
</div>
</body></html>